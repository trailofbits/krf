proto: struct thread *td, struct dup_args *uap
parms: td, uap
errors:
  - EBADF
  - EMFILE
